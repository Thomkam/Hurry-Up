<div class="py-5" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('<%= cl_image_path @restaurant.image.key, height: 300, crop: :fill %>');: cover; background-position: center;">
  <h1 class="text-white ps-3 text-center">  <%= link_to "#{ @restaurant.name}", sitting_area_path(@sitting_areas.first), class: "text-decoration-none text-white" %></h1>
</div>


<nav>
  <div class="nav nav-tabs" id="nav-tab" role="tablist">
    <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true">en cours</button>
    <button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">passées</button>
  </div>
</nav>


<div class="tab-content" id="nav-tabContent">
  <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab" tabindex="0">
      <% @sitting_areas.each do |sitting_area| %>
        <% unless sitting_area.orders.where(status: "en attente").empty? %>
        <div class="rounded-4 bg-light px-2 py-3 my-2">
             <h3>Table <%= sitting_area.sitting_area_number %> :</h3>
           <% sitting_area.orders.each do |order|%>
            <% if order.status == "en attente" %>
              <div class="d-flex justify-content-between">

                <div class="d-flex flex-column align-items-start">
                  <div>
                    <%= order.quantity %> <%= order.item.name %>
                  </div>
                  <div class="d-flex justify-content-between">
                    <div class="badge bg-secondary"><%= order.status %></div>
                    <small>(il y a <%= order.find_time %>)</small>
                  </div>
                </div>
                <div class="d-flex justify-content-between">
                  <%= form_with model: order do |f| %>
                    <%= f.hidden_field :status, value: "refuser" %>
                    <%= f.submit value: "X", class: 'btn btn-secondary rounded-circle me-2' %>
                  <% end %>
                  <%= form_with model: order do |f| %>
                    <%= f.hidden_field :status, value: "accepter" %>
                    <%= f.submit value: "V", class: 'btn btn-primary rounded-circle' %>
                  <% end %>
                </div>
              </div>
              <hr class = "my-hr">
            <% end %>
          <% end %>
          <div class="d-flex justify-content-end ">
                  <p>ALL</p>
                    <div class="d-flex " style="  margin-left: 10px;">
                      <%= simple_form_for :sitting_area, url: update_all_orders_path, method: :patch do |f| %>
                        <%= f.hidden_field :sitting_area,  value: sitting_area.id %>
                        <%= f.hidden_field :status,  value: 'refuser' %>
                        <%= f.submit 'X', class: 'btn btn-secondary rounded-circle me-2' %>
                      <% end %>
                      <%= simple_form_for :sitting_area, url: update_all_orders_path, method: :patch do |f| %>
                        <%= f.hidden_field :sitting_area,  value: sitting_area.id %>
                        <%= f.hidden_field :status,  value: 'accepter' %>
                        <%= f.submit 'V', class: 'btn btn-primary rounded-circle'%>
                      <% end %>
                    </div>
                  </div>
      </div>

      <% end %>
      <% end %>
      </div>
  </div>

  <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab" tabindex="0">
    <% if current_user.status === "owner" %>
      <% @users.each do |user| %>
      <div class = "">

        <%=user.email.capitalize.split("@")[0] %>
        <p>NUMBER commandes accepter</p>
        <button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
          V
        </button>
        <div class="collapse" id="collapseExample">
          <div class="card card-body">
            <% @orders.where(employee: user.id).each do |order| %>
            <%= order.item.name %>
            <% end %>
          </div>
        </div>
      </div>
      <hr>
      <% end %>
    <% else %>
    eqfsfd
    <% end %>
   </div>

</div>

       <%# <div> %
        <%# <% accepted_orders = @restaurant.orders.where(status: "accepter") %>
        <%# <% accepted_orders.each do |order| %>
        <%# <% Commande accepted par <%= User.find(order.employee).first_name  quantity: <%= order.quantity %>
        <%# <% <% end %>
       <%# </div> %>

      <%# <div>
        <% refused_orders = @restaurant.orders.where(status: "refuser") %>
        <%# <% refused_orders.each do |order| %>
        <%# Commande refusé par <%= User.find(order.employee).first_name %>
        <%# , quantity: <%= order.quantity %>
        <%# <% end %>
      <%# </div> %>
